<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    corvix_live    [Corvix Wiki]
  </title>

  <meta name="generator" content="DokuWiki Release 2009-12-25c &quot;Lemming&quot;" />
<meta name="robots" content="index,follow" />
<meta name="date" content="2010-05-12T10:20:11+0200" />
<meta name="keywords" content="corvix_live" />
<link rel="search" type="application/opensearchdescription+xml" href="/~wiki/lib/exe/opensearch.php" title="Corvix Wiki" />
<link rel="start" href="/~wiki/" />
<link rel="contents" href="/~wiki/doku.php?id=corvix_live&amp;do=index" title="Index" />
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="/~wiki/feed.php" />
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="/~wiki/feed.php?mode=list&amp;ns=" />
<link rel="alternate" type="text/html" title="Plain HTML" href="/~wiki/doku.php?do=export_xhtml&amp;id=corvix_live" />
<link rel="alternate" type="text/plain" title="Wiki Markup" href="/~wiki/doku.php?do=export_raw&amp;id=corvix_live" />
<link rel="canonical" href="http://merapi.physik.uni-kl.de/~wiki/doku.php?id=corvix_live" />
<link rel="stylesheet" media="all" type="text/css" href="/~wiki/lib/exe/css.php?s=all&amp;t=default&amp;tseed=1272878938" />
<link rel="stylesheet" media="screen" type="text/css" href="/~wiki/lib/exe/css.php?t=default&amp;tseed=1272878938" />
<link rel="stylesheet" media="print" type="text/css" href="/~wiki/lib/exe/css.php?s=print&amp;t=default&amp;tseed=1272878938" />
<script type="text/javascript" charset="utf-8" ><!--//--><![CDATA[//><!--
var NS='';var JSINFO = {"id":"corvix_live","namespace":""};
//--><!]]></script>
<script type="text/javascript" charset="utf-8" src="/~wiki/lib/exe/js.php?tseed=1272878938" ></script>

  <link rel="shortcut icon" href="/~wiki/lib/tpl/default/images/favicon.ico" />

  </head>

<body>
<div class="dokuwiki">
  
  <div class="stylehead">

    <div class="header">
      <div class="pagename">
        [[<a href="/~wiki/doku.php?id=corvix_live&amp;do=backlink"  title="Backlinks">corvix_live</a>]]
      </div>
      <div class="logo">
        <a href="/~wiki/doku.php"  name="dokuwiki__top" id="dokuwiki__top" accesskey="h" title="[H]">Corvix Wiki</a>      </div>

      <div class="clearer"></div>
    </div>

    
    <div class="bar" id="bar__top">
      <div class="bar-left" id="bar__topleft">
        <form class="button btn_source" method="post" action="/~wiki/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="corvix_live" /><input type="submit" value="Show pagesource" class="button" accesskey="v" title="Show pagesource [V]" /></div></form>        <form class="button btn_revs" method="get" action="/~wiki/doku.php"><div class="no"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="corvix_live" /><input type="submit" value="Old revisions" class="button" accesskey="o" title="Old revisions [O]" /></div></form>      </div>

      <div class="bar-right" id="bar__topright">
        <form class="button btn_recent" method="get" action="/~wiki/doku.php"><div class="no"><input type="hidden" name="do" value="recent" /><input type="hidden" name="id" value="corvix_live" /><input type="submit" value="Recent changes" class="button" accesskey="r" title="Recent changes [R]" /></div></form>        <form action="/~wiki/doku.php" accept-charset="utf-8" class="search" id="dw__search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>&nbsp;
      </div>

      <div class="clearer"></div>
    </div>

        <div class="breadcrumbs">
      <span class="bchead">Trace:</span> <span class="bcsep">&raquo;</span> <a href="/~wiki/doku.php?id=corvix"  class="breadcrumbs" title="corvix">corvix</a> <span class="bcsep">&raquo;</span> <span class="curid"><a href="/~wiki/doku.php?id=corvix_live"  class="breadcrumbs" title="corvix_live">corvix_live</a></span>          </div>
    
    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    <!-- TOC START -->
<div class="toc">
<div class="tocheader toctoggle" id="toc__header">Table of Contents</div>
<div id="toc__inside">

<ul class="toc">
<li class="clear">

<ul class="toc">
<li class="level2"><div class="li"><span class="li"><a href="#definition" class="toc">Definition</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="#how_to_get" class="toc">How to get</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="#how_to_use" class="toc">How to use</a></span></div>
<ul class="toc">
<li class="level3"><div class="li"><span class="li"><a href="#live_copy" class="toc">live copy</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#harddisk_installation" class="toc">harddisk installation</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#boot_the_installed_corvix" class="toc">boot the installed corvix</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#boot_options" class="toc">boot options</a></span></div></li>
</ul>
</li>
<li class="level2"><div class="li"><span class="li"><a href="#image_repository" class="toc">Image repository</a></span></div>
<ul class="toc">
<li class="level3"><div class="li"><span class="li"><a href="#preparation" class="toc">preparation</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#directory_contents" class="toc">directory contents</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#file_definitions" class="toc">file definitions</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#creating_os_image" class="toc">Creating os image</a></span></div></li>
</ul>
</li>
<li class="level2"><div class="li"><span class="li"><a href="#corvix_live_commands" class="toc">Corvix live commands</a></span></div>
<ul class="toc">
<li class="level3"><div class="li"><span class="li"><a href="#cx-list-available-image" class="toc">cx-list-available-image</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#cx-download" class="toc">cx-download</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#cx-list" class="toc">cx-list</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#cx-power" class="toc">cx-power</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#cx-shutdown" class="toc">cx-shutdown</a></span></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><span class="li"><a href="#inside_corvix-live" class="toc">Inside Corvix-live</a></span></div>
<ul class="toc">
<li class="level2"><div class="li"><span class="li"><a href="#initrd_contents" class="toc">initrd contents</a></span></div>
<ul class="toc">
<li class="level3"><div class="li"><span class="li"><a href="#library_list" class="toc">library list</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#binary_list" class="toc">binary list</a></span></div></li>
</ul>
</li>
<li class="level2"><div class="li"><span class="li"><a href="#the_init_script" class="toc">the init script</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="#corvix_script" class="toc">corvix script</a></span></div></li>
</ul>
</li>
<li class="level1"><div class="li"><span class="li"><a href="#usage_example" class="toc">Usage example</a></span></div>
<ul class="toc">
<li class="level2"><div class="li"><span class="li"><a href="#master_installation" class="toc">master installation</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="#after_restart" class="toc">after restart</a></span></div>
<ul class="toc">
<li class="level3"><div class="li"><span class="li"><a href="#network" class="toc">network</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#xen_configuration" class="toc">Xen configuration</a></span></div></li></ul>
</li></ul>
</li></ul>
</div>
</div>
<!-- TOC END -->



<h2><a name="definition" id="definition">Definition</a></h2>
<div class="level2">

<p>
This is the live version of Corvix distribution. The aim is to give an experimental cluster environment or for learning purpose.
Albeit it can be used also as a base system to install the whole cluster.
</p>

</div>

<h2><a name="how_to_get" id="how_to_get">How to get</a></h2>
<div class="level2">

<p>
CD/flash-disk image will be available soon.
</p>

</div>

<h2><a name="how_to_use" id="how_to_use">How to use</a></h2>
<div class="level2">

<p>
Plug the boot CD or USB-thumb, and follow instructions. Don&#039;t use it in your working computer unless you know what you are doing!
The boot cd contains a default os-image. Otherwise, it is possible to use images from the repository, the same one used by cx-* commands. By default the CD installs the so called “HEAD” server, which managed xen virtual machines (domU). Using these virtual machines, Corvix live can build a complete “model-cluster” in one Linux box.
</p>

</div>

<h3><a name="live_copy" id="live_copy">live copy</a></h3>
<div class="level3">

<p>
This will copy the <acronym title="Operating System">OS</acronym> image in an available Linux partition (currently ext3), along side with other Linux <acronym title="Operating System">OS</acronym>/Data. No formating is required. After usage the host original operating system may delete the ”/corvix” directory.
</p>

</div>

<h3><a name="harddisk_installation" id="harddisk_installation">harddisk installation</a></h3>
<div class="level3">

<p>
Use entire harddisk. The <acronym title="Operating System">OS</acronym> will be installed in the first partition (Xda1). So take care about this! fdisk program is used to make partition. The partition will be formated as ext3.
</p>

</div>

<h3><a name="boot_the_installed_corvix" id="boot_the_installed_corvix">boot the installed corvix</a></h3>
<div class="level3">

<p>
Boot the Corvix-Live installed partition. In case you forgot to install boot loader properly.
</p>

</div>

<h3><a name="boot_options" id="boot_options">boot options</a></h3>
<div class="level3">

</div>

<h4><a name="locking_the_installed_corvix" id="locking_the_installed_corvix">locking the installed corvix</a></h4>
<div class="level4">

<p>

Use command corvix-install-lock, after installation. Next time when you boot with Corvix-live, you will be asked whether to overide the <acronym title="Operating System">OS</acronym>, or just use the installed <acronym title="Operating System">OS</acronym>.
</p>

</div>

<h2><a name="image_repository" id="image_repository">Image repository</a></h2>
<div class="level2">

<p>
The image repository is a server which provides all the virtual machine images for the “model-cluster”. The files and directory structure are the same both for “HEAD” installation and the virtual machines.
</p>

</div>

<h3><a name="preparation" id="preparation">preparation</a></h3>
<div class="level3">

<p>
Corvix-live uses http connection to fetch operating system (<acronym title="Operating System">OS</acronym>) from a repository server. This repository is available both for installation process and also for creating virtual machine (domU) in Xen environment. An <acronym title="Operating System">OS</acronym> image is put under a directory with corresponding image name. The directories for many images must be listed in the &#039;list.txt&#039; file, to be accessible by the installation software of cx-* commands. To make repository you need a running http server, and put any directory name there, for instance &#039;xen&#039;. Then the address of your repository is: <a href="http://server.address/xen" class="urlextern" title="http://server.address/xen"  rel="nofollow">http://server.address/xen</a>.
</p>

</div>

<h3><a name="directory_contents" id="directory_contents">directory contents</a></h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> list.txt: the listing of available image directories</div>
</li>
<li class="level1"><div class="li"> image directory, contains</div>
</li>
<li class="level1"><div class="li">* disk.tgz: tar-gzipped <acronym title="Operating System">OS</acronym> image</div>
</li>
<li class="level1"><div class="li">* config: Xen configuration file with pseudo commands</div>
</li>
</ul>

</div>

<h3><a name="file_definitions" id="file_definitions">file definitions</a></h3>
<div class="level3">

</div>

<h4><a name="listtxt" id="listtxt">list.txt</a></h4>
<div class="level4">

<p>
Just a list, example:
</p>
<pre class="code">dns
nfs
nis</pre>

<p>

The corresponding directory _must_ exist! The existed directory will not be accessible if not listed in this file.
</p>

</div>

<h4><a name="config" id="config">config</a></h4>
<div class="level4">

<p>
A normal Xen configuration file with additional pseudocommands. Example:

</p>
<pre class="code"># CORVIX-ROAM: Xen configuration file
# Rosandi 2009
# (*xendomain*) will be mapped to the absolute path
# (*mac*) will be filled by mac_address configured in downloader computer
#- Network control image:
#- domain name service (dns) and dhcp
#$ disk-size 1024
#$ n-files 14832
#
kernel      = &#039;/boot/vmlinuz-2.6.26-2-xen-686&#039;
ramdisk     = &#039;/boot/initrd.img-2.6.26-2-xen-686&#039;
memory      = &#039;128&#039;
root        = &#039;/dev/xvda1 ro&#039;
disk        = [
                 &#039;file:(*xendomain*)/disk.img,xvda1,w&#039;,
             ]
name        = &#039;(*name*)&#039;
vif         = [ &#039;mac=(*mac*)&#039;, ]
on_poweroff = &#039;destroy&#039;
on_reboot   = &#039;restart&#039;
on_crash    = &#039;restart&#039; </pre>

<p>

The phrases written within &#039;(*…*)&#039; will be substituted with values by the client software (cx-download commands). 
</p>
<ul>
<li class="level1"><div class="li"> name, replaced the domain name of the virtual machine</div>
</li>
<li class="level1"><div class="li"> xendomain, replaced by the path to the xen domain directory</div>
</li>
<li class="level1"><div class="li"> mac, is replaced by a mac address </div>
</li>
</ul>

<p>

Comments:
</p>
<ul>
<li class="level1"><div class="li"> normal comment &#039;#&#039; </div>
</li>
<li class="level1"><div class="li"> information comment &#039;#-&#039;</div>
</li>
<li class="level1"><div class="li"> pseudo command &#039;#$&#039;, this has special meaning:</div>
</li>
<li class="level1"><div class="li">* disk-size: the size of domU disk image in <acronym title="Megabyte">MB</acronym></div>
</li>
<li class="level1"><div class="li">* n-files: the number of files in disk.tgz</div>
</li>
<li class="level1"><div class="li">* maybe more</div>
</li>
</ul>

</div>

<h3><a name="creating_os_image" id="creating_os_image">Creating os image</a></h3>
<div class="level3">

</div>

<h4><a name="using_debootstrap" id="using_debootstrap">using debootstrap</a></h4>
<div class="level4">

</div>

<h4><a name="direct_harddisk_copy" id="direct_harddisk_copy">direct harddisk copy</a></h4>
<div class="level4">

</div>

<h2><a name="corvix_live_commands" id="corvix_live_commands">Corvix live commands</a></h2>
<div class="level2">

<p>
Corvix live provides a set of command to manage the “virtual cluster” using xen. The commands are collected in corvix-scripts.deb file. 
</p>

<p>
Syntax:
</p>
<ul>
<li class="level1"><div class="li"> &lt;bla&gt; means bla must be there</div>
</li>
<li class="level1"><div class="li"> [blu] means blu may be there</div>
</li>
<li class="level1"><div class="li"> that|this means choose one: that or this</div>
</li>
</ul>

</div>

<h3><a name="cx-list-available-image" id="cx-list-available-image">cx-list-available-image</a></h3>
<div class="level3">

<p>
Lists and give information about images available in the repository.
</p>

</div>

<h3><a name="cx-download" id="cx-download">cx-download</a></h3>
<div class="level3">

<p>
Downloads images from repository. Syntax:
</p>
<pre class="code">cx-download &lt;name&gt; [-o &lt;new name&gt;] [-e]</pre>
<ul>
<li class="level1"><div class="li"> name is the name of image, as given by cx-list-available-image</div>
</li>
<li class="level1"><div class="li"> -o give the downloaded image a new name</div>
</li>
<li class="level1"><div class="li"> -e boot the downloaded image immediately</div>
</li>
</ul>

<p>

Conditions
</p>
<ul>
<li class="level1"><div class="li"> If the file &#039;generator&#039; exist, this file will be executed inside the target domain directory. No image will be downloaded from repository bx cx-download.</div>
</li>
<li class="level1"><div class="li"> If postcommand file exist, this file will be executed after downloading or the execution of &#039;generate&#039; script.</div>
</li>
</ul>

</div>

<h3><a name="cx-list" id="cx-list">cx-list</a></h3>
<div class="level3">

<p>
List available image in the current computer (not in the repository).
</p>

</div>

<h3><a name="cx-power" id="cx-power">cx-power</a></h3>
<div class="level3">

<p>
Power up the Xen image. Syntax:
</p>
<pre class="code">cx-power &lt;name&gt;</pre>

<p>

name can be &#039;all&#039;, means power up all the available image.
</p>

</div>

<h3><a name="cx-shutdown" id="cx-shutdown">cx-shutdown</a></h3>
<div class="level3">

<p>
Shutdown the running Xen domU. Syntax:

</p>
<pre class="code">cx-shutdown &lt;name&gt;</pre>

<p>

name may also be &#039;all&#039;.
</p>

</div>

<h1><a name="inside_corvix-live" id="inside_corvix-live">Inside Corvix-live</a></h1>
<div class="level1">

</div>

<h2><a name="initrd_contents" id="initrd_contents">initrd contents</a></h2>
<div class="level2">

</div>

<h3><a name="library_list" id="library_list">library list</a></h3>
<div class="level3">

</div>

<h3><a name="binary_list" id="binary_list">binary list</a></h3>
<div class="level3">

</div>

<h2><a name="the_init_script" id="the_init_script">the init script</a></h2>
<div class="level2">

</div>

<h2><a name="corvix_script" id="corvix_script">corvix script</a></h2>
<div class="level2">

</div>

<h1><a name="usage_example" id="usage_example">Usage example</a></h1>
<div class="level1">

</div>

<h2><a name="master_installation" id="master_installation">master installation</a></h2>
<div class="level2">

</div>

<h2><a name="after_restart" id="after_restart">after restart</a></h2>
<div class="level2">

</div>

<h3><a name="network" id="network">network</a></h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> two interfaces needed</div>
</li>
<li class="level1"><div class="li">* first interface (eth0) outside: outside ip</div>
</li>
<li class="level1"><div class="li">* second interface (eth1) inside: 10.0.1.0/24. Address: 10.0.1.254, used as gateway by domU&#039;s.</div>
</li>
</ul>

<p>

If the interface ordering is not right, try to edit 
&#039;/etc/udev/rules.d/70-persistent-net.rules&#039;. Give the right interface names there, and restart.
</p>

</div>

<h3><a name="xen_configuration" id="xen_configuration">Xen configuration</a></h3>
<div class="level3">

<p>
In file &#039;/etc/xen/xend-config.sxp&#039;, make sure you have:
</p>
<pre class="code">(network-script &#039;network-bridge netdev=eth1)
(vif-script vif-bridge)</pre>

<p>

Restart xen:

</p>
<pre class="code">/etc/init.d/xend restart</pre>

</div>

    <!-- wikipage stop -->
  </div>

  <div class="clearer">&nbsp;</div>

  
  <div class="stylefoot">

    <div class="meta">
      <div class="user">
              </div>
      <div class="doc">
        corvix_live.txt &middot; Last modified: 2010/05/12 10:20 (external edit)      </div>
    </div>

   
    <div class="bar" id="bar__bottom">
      <div class="bar-left" id="bar__bottomleft">
        <form class="button btn_source" method="post" action="/~wiki/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="corvix_live" /><input type="submit" value="Show pagesource" class="button" accesskey="v" title="Show pagesource [V]" /></div></form>        <form class="button btn_revs" method="get" action="/~wiki/doku.php"><div class="no"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="corvix_live" /><input type="submit" value="Old revisions" class="button" accesskey="o" title="Old revisions [O]" /></div></form>              </div>
      <div class="bar-right" id="bar__bottomright">
                                        <form class="button btn_login" method="get" action="/~wiki/doku.php"><div class="no"><input type="hidden" name="do" value="login" /><input type="hidden" name="sectok" value="8f61c54f24998367db402acb2b1d9685" /><input type="hidden" name="id" value="corvix_live" /><input type="submit" value="Login" class="button" title="Login" /></div></form>        <form class="button btn_index" method="get" action="/~wiki/doku.php"><div class="no"><input type="hidden" name="do" value="index" /><input type="hidden" name="id" value="corvix_live" /><input type="submit" value="Index" class="button" accesskey="x" title="Index [X]" /></div></form>        <a class="nolink" href="#dokuwiki__top"><input type="button" class="button" value="Back to top" onclick="window.scrollTo(0, 0)" title="Back to top" /></a>&nbsp;
      </div>
      <div class="clearer"></div>
    </div>

  </div>

  <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license:<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></div>
</div>

<div class="footerinc">

  <a  href="/~wiki/feed.php" title="Recent changes RSS feed"><img src="/~wiki/lib/tpl/default/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" /></a>

        <a  href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" title="CC Attribution-Noncommercial-Share Alike 3.0 Unported"><img src="/~wiki/lib/images/license/button/cc-by-nc-sa.png" width="80" height="15" alt="" /></a>
  
  <a  href="http://www.dokuwiki.org/donate" title="Donate"><img src="/~wiki/lib/tpl/default/images/button-donate.gif" alt="Donate" width="80" height="15" /></a>

  <a  href="http://www.php.net" title="Powered by PHP"><img src="/~wiki/lib/tpl/default/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>

  <a  href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="/~wiki/lib/tpl/default/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" /></a>

  <a  href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS"><img src="/~wiki/lib/tpl/default/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>

  <a  href="http://dokuwiki.org/" title="Driven by DokuWiki"><img src="/~wiki/lib/tpl/default/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>



</div>

<div class="no"><img src="/~wiki/lib/exe/indexer.php?id=corvix_live&amp;1376815290" width="1" height="1" alt=""  /></div>
</body>
</html>
